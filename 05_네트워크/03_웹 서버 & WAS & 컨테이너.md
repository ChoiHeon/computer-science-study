# 웹 서버 & WAS & 컨테이너

## 웹 서버

클라이언트가 요청한 정적인 컨텐츠(정적 페이지)를 HTTP 프로토콜을 통해서 제공해주는 서버입니다. 웹 서버는 HTTP Request를 받고 정적인 정보를 반환합니다.

웹 서버는 소프트웨어와 하드웨어로 구분됩니다.

* 소프트웨어: 클라이언트로부터 HTTP Request를 받아 정적인 컨텐츠를 제공하는 컴퓨터 프로그램를 의미합니다.
* 하드웨어: 웹 서버가 설치되어 있는 컴퓨터를 의미합니다.

웹 서버의 예시는 Nginx, Appach HTTP Server, IIS 등이 있습니다.



## WAS (Web Application Server)

웹 애플리케이션과 서버 환경을 만들어 동작시키는 기능을 제공하는 소프트웨어 프레임워크입니다. 웹 애플리케이션을 실행시켜 필요한 기능을 수행하고 그 결과를 웹 서버에 전달합니다. **웹 서버와 컨테이너를 합친 것**으로 보아도 무방합니다.

동작과정은 다음과 같습니다.

1. 클라이언트의 브라우저가 웹 서버에 요청을 보냅니다.
2. 동적 처리가 필요할 경우 웹 서버에서 컨테이너에 요청을 보냅니다. 
3. 컨테이너는 web.xml을 참조하여 스레드를 생성하고 HttpServletRequest와 HttpServetResponse 객체를 생성해 스레드의 인자로 전달합니다.
4. 이후 컨테이너는 사용자의 요청에 맞는 서블릿을 호출, 스레드에서 실행합니다. (JSP의 경우 서블릿으로 변환합니다.)
5. HTTP 메서드(GET, POST, ...)에 따라 요청을 처리한 다음 결과를 정적인 페이지를 생성, HttpServletResponse 객체에 담아 컨테이너에 전달합니다. 
6. 컨테이너는 전달받은 객체를 HttpResponse 형태로 전환, 웹 서버에 전달합니다.
7. 스레드를 종료하고 생성했던 객체들을 소멸시킵니다.



## 컨테이너

서블릿과 JSP를 실행시킬 수 있는 소프트웨어 입니다. 즉, 클라이언트의 요청의 동적인 부분을 웹 서버 대신 처리해서 정적인 파일로 만든 다음 웹 서버에 전달합니다. 웹 컨테이너 또는 서블릿 컨테이너라고 합니다.